<%= title 'Encuentratumascota', visible: false %>

<section id="main-sidebar">
  <div class="btn-group sidebar-options">
    <button class="btn" data-publication-type="all">Todos</button>
    <button class="btn" data-publication-type="lost">Perdidos</button>
    <button class="btn" data-publication-type="found">Encontrados</button>
    <button class="btn" data-publication-type="adoption">En Adopci&oacute;n</button>
  </div>

  <!-- 1. Publication list -->
  <div id="publication-list" class="sidebar-item">
    <ul></ul>
    <div class="empty-state">
      <p>
        <span class="big-icon empty-publication-list"></span>
        Actualmente no hay mascotas que coincidan con este filtro.
      </p>
    </div>
  </div>
  <!-- 2. Publication form -->
  <div id="new-publication-container" class="sidebar-item">
    <%= render partial: 'shared/new_publication' %>
  </div>
  <!-- 3. Publication detail -->
  <div id="publication-detail-container" class="sidebar-item">
    <p class="detail-nav"><a href="#" class="go-back"><span class="icon back"></span>Regresar</a></p>
    <div class="publication-detail-info"></div>
    <div class="contact-info">
      <p><strong>Informaci&oacute;n de contacto:</strong> <span class="content"></span></p>
    </div>
    <div class="contact">
      <button class="btn btn-success">Solicitar informaci&oacute;n de contacto</button>
    </div>
  </div>
</section>

<section id="main-panel"></section>

<%= render partial: 'shared/publication_templates' %>
<%= render partial: 'shared/sign_in' %>
<%= render partial: 'shared/sign_up' %>

<% content_for :javascript do %>
  require(['require', 'app/main/index'], function (require) {
    require(['app/main/index'], function (view) {
      view.init(<%= {
        userSignedIn: !! current_user,
        publications: @publications.map do |publication|
          Presenters::Publication.to_json_hash(publication)
        end,
        flash: @flash_messages
      }.to_json.html_safe %>);
    });
  });
<% end %>
